{"ast":null,"code":"import{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[username,setUsername]=useState(\"\");const[age,setAge]=useState(\"\");const[message,setMessage]=useState(\"\");const[users,setUsers]=useState([]);// Fetch all users from the backend\nconst fetchUsers=async()=>{try{const response=await fetch(\"https://127.0.0.1:5000/users\");const data=await response.json();setUsers(data);}catch(error){console.error(\"Error fetching users:\",error);}};// Fetch users on component mount\nuseEffect(()=>{fetchUsers();},[]);// Handle form submission\nconst handleSubmit=async e=>{e.preventDefault();const response=await fetch(\"https://127.0.0.1:5000/submit\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username,age})});const data=await response.json();setMessage(data.message);// Refresh the users list after submission\nfetchUsers();// Clear input fields\nsetUsername(\"\");setAge(\"\");};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"400px\",margin:\"50px auto\",textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Submit Your Details\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Username\",value:username,onChange:e=>setUsername(e.target.value),required:true})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Age\",value:age,onChange:e=>setAge(e.target.value),required:true})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]}),message&&/*#__PURE__*/_jsx(\"p\",{children:message}),/*#__PURE__*/_jsx(\"h3\",{children:\"All Users\"}),/*#__PURE__*/_jsx(\"ul\",{children:users.map((user,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[user.username,\" - \",user.age,\" years old\"]},index))})]});}export default App;","map":{"version":3,"names":["useState","useEffect","jsx","_jsx","jsxs","_jsxs","App","username","setUsername","age","setAge","message","setMessage","users","setUsers","fetchUsers","response","fetch","data","json","error","console","handleSubmit","e","preventDefault","method","headers","body","JSON","stringify","style","maxWidth","margin","textAlign","children","onSubmit","type","placeholder","value","onChange","target","required","map","user","index"],"sources":["D:/Three-tier/frontend/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\n\nfunction App() {\n  const [username, setUsername] = useState(\"\");\n  const [age, setAge] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [users, setUsers] = useState([]);\n\n  // Fetch all users from the backend\n  const fetchUsers = async () => {\n    try {\n      const response = await fetch(\"https://127.0.0.1:5000/users\");\n      const data = await response.json();\n      setUsers(data);\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n    }\n  };\n\n  // Fetch users on component mount\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  // Handle form submission\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    const response = await fetch(\"https://127.0.0.1:5000/submit\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ username, age }),\n    });\n\n    const data = await response.json();\n    setMessage(data.message);\n\n    // Refresh the users list after submission\n    fetchUsers();\n\n    // Clear input fields\n    setUsername(\"\");\n    setAge(\"\");\n  };\n\n  return (\n    <div style={{ maxWidth: \"400px\", margin: \"50px auto\", textAlign: \"center\" }}>\n      <h2>Submit Your Details</h2>\n      <form onSubmit={handleSubmit}>\n        <div>\n          <input\n            type=\"text\"\n            placeholder=\"Username\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            required\n          />\n        </div>\n        <div>\n          <input\n            type=\"number\"\n            placeholder=\"Age\"\n            value={age}\n            onChange={(e) => setAge(e.target.value)}\n            required\n          />\n        </div>\n        <button type=\"submit\">Submit</button>\n      </form>\n      {message && <p>{message}</p>}\n\n      <h3>All Users</h3>\n      <ul>\n        {users.map((user, index) => (\n          <li key={index}>{user.username} - {user.age} years old</li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}